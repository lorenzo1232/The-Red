<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>The Red ‚Äì Futuristic Feed</title>
<style>
  body {
    margin: 0;
    background: #000;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }

  /* HEADER transparente */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    background: none;
    border-bottom: none;
    box-shadow: none;
    position: absolute;
    width: 100%;
    top: 0;
    z-index: 10;
  }
  .header .left, .header .right {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .header-icon {
    font-size: 20px;
    cursor: pointer;
    transition: transform 0.2s, color 0.2s;
  }
  .header-icon:hover { color: #ff1e1e; transform: scale(1.1); }
  .logo {
    font-size: 20px;
    font-weight: bold;
    color: #ff1e1e;
    text-shadow: 0 0 8px #ff1e1e;
  }

  /* FEED */
  .feed {
    flex: 1;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
  }
  .video-container {
    height: 100vh;
    position: relative;
    scroll-snap-align: start;
  }
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* INFO VIDEO */
  .video-info {
    position: absolute;
    bottom: 80px;
    left: 15px;
    font-size: 14px;
    text-shadow: 0 0 6px black;
  }
  .video-info strong {
    color: #ff1e1e;
    font-size: 15px;
  }

  /* ICONOS flotantes sin fondo */
  .left-icons {
    position: absolute;
    left: 10px;
    bottom: 140px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    z-index: 5;
  }
  .left-icons button {
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #ff1e1e;
    text-shadow: 0 0 6px rgba(255,0,0,0.9);
    transition: transform 0.2s, text-shadow 0.2s;
  }
  .left-icons button:hover {
    transform: scale(1.15);
    text-shadow: 0 0 15px rgba(255,0,0,1);
  }

  /* NAV BAR INFERIOR */
  .bottom-nav {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 6px 0;
    background: rgba(15, 15, 15, 0.95);
    border-top: 2px solid #ff1e1e;
    box-shadow: 0 -2px 12px rgba(255,0,0,0.4);
    z-index: 10;
  }
  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: white;
    font-size: 12px;
    text-decoration: none;
    cursor: pointer;
    transition: color 0.2s;
  }
  .nav-item:hover { color: #ff1e1e; }
  .nav-icon {
    font-size: 20px;
    margin-bottom: 2px;
  }
  .upload-btn {
    background: linear-gradient(90deg, #ff1e1e, #ff4a4a);
    padding: 10px;
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,0,0,0.9);
    font-size: 22px;
    animation: glowPulse 2s infinite alternate;
  }

  @keyframes glowPulse {
    from { box-shadow: 0 0 8px rgba(255,0,0,0.7); }
    to { box-shadow: 0 0 20px rgba(255,0,0,1); }
  }
</style>
</head>
<body>

<!-- HEADER transparente -->
<div class="header">
  <div class="left">
    <span class="header-icon">üîç</span>
  </div>
  <div class="logo">THE RED</div>
  <div class="right">
    <span>Following</span>
    <span class="header-icon">‚ò∞</span>
  </div>
</div>

<!-- FEED -->
<div class="feed" id="feed"></div>

<!-- NAV BAR INFERIOR -->
<div class="bottom-nav">
  <a href="#" class="nav-item">
    <div class="nav-icon">üè†</div>
    <div>Home</div>
  </a>
  <a href="#" class="nav-item">
    <div class="nav-icon">üë•</div>
    <div>Friends</div>
  </a>
  <a href="#" class="nav-item upload-btn">Ôºã</a>
  <a href="#" class="nav-item">
    <div class="nav-icon">üí¨</div>
    <div>Inbox</div>
  </a>
  <a href="#" class="nav-item">
    <div class="nav-icon">üë§</div>
    <div>Profile</div>
  </a>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCK3buy-uDODEUEbfANKz5V7UOdw_Iubws",
  authDomain: "the-red-6d1f8.firebaseapp.com",
  projectId: "the-red-6d1f8",
  storageBucket: "the-red-6d1f8.appspot.com",
  messagingSenderId: "720944313823",
  appId: "1:720944313823:web:4cb2acd48dfb173c6c806a",
  measurementId: "G-758MJ16J16"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function loadVideos() {
  const feed = document.getElementById("feed");
  const querySnapshot = await getDocs(collection(db, "videos"));

  if (querySnapshot.empty) {
    feed.innerHTML = `
      <div class="video-container">
        <video src="https://www.w3schools.com/html/mov_bbb.mp4" autoplay loop muted playsinline></video>
        <div class="left-icons">
          <button>üë§</button>
          <button>‚ù§Ô∏è</button>
          <button>üí¨</button>
          <button>üìå</button>
          <button>üîÑ</button>
        </div>
      </div>
    `;
    initVideoScroll();
    return;
  }

  querySnapshot.forEach((doc) => {
    const data = doc.data();
    feed.innerHTML += `
      <div class="video-container">
        <video src="${data.url}" autoplay loop muted playsinline></video>
        <div class="video-info"><strong>@${data.username || 'user'}</strong> ${data.description || ''}</div>
        <div class="left-icons">
          <button>üë§</button>
          <button>‚ù§Ô∏è</button>
          <button>üí¨</button>
          <button>üìå</button>
          <button>üîÑ</button>
        </div>
      </div>
    `;
  });

  initVideoScroll();
}

function initVideoScroll() {
  const videos = document.querySelectorAll("video");
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.play();
      } else {
        entry.target.pause();
      }
    });
  }, { threshold: 0.7 });

  videos.forEach(video => observer.observe(video));
}

loadVideos();
</script>

</body>
</html>
